<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ÙˆØ§Ù„Ù†ØµÙˆØµ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† (ÙØ§ØªØ­/Ø¯Ø§ÙƒÙ†/ÙˆØ±Ù‚ÙŠ) */
        :root {
            --bg-color: #f8fafc;
            --text-color: #0f172a;
            --card-bg: #ffffff;
            --primary: #0ea5e9;
            --danger: #ef4444;
            --border: #e2e8f0;
        }

        body.dark-mode {
            --bg-color: #0f172a;
            --text-color: #f8fafc;
            --card-bg: #1e293b;
            --primary: #38bdf8;
            --border: #334155;
        }

        body.sepia-mode {
            --bg-color: #fdf6e3;
            --text-color: #4c4031;
            --card-bg: #eee8d5;
            --primary: #b58900;
            --border: #dcd6c5;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Tajawal', sans-serif; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        h1 { text-align: center; color: var(--primary); margin-bottom: 20px; font-size: 24px; }

        /* Ø§Ù„Ø´Ø§Ø´Ø§Øª (Views) */
        .view { display: none; flex-direction: column; flex-grow: 1; width: 100%; }
        .view.active { display: flex; }

        /* 1. Ø´Ø§Ø´Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (Ø§Ù„Ù…ÙƒØªØ¨Ø©) */
        .add-btn {
            background-color: var(--primary); color: white; border: none;
            padding: 15px; border-radius: 12px; font-size: 18px; font-weight: bold;
            cursor: pointer; width: 100%; margin-bottom: 20px;
        }

        .list-container { display: flex; flex-direction: column; gap: 10px; }
        
        .list-item {
            background-color: var(--card-bg); border: 1px solid var(--border);
            padding: 15px; border-radius: 12px; display: flex; justify-content: space-between;
            align-items: center; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .list-item h3 { font-size: 18px; pointer-events: none; }
        
        .delete-btn {
            background-color: var(--danger); color: white; border: none;
            padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 14px;
        }

        /* 2. Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© */
        input, textarea {
            width: 100%; padding: 12px; border: 2px solid var(--border);
            border-radius: 10px; background-color: var(--card-bg); color: var(--text-color);
            font-size: 16px; outline: none; margin-bottom: 15px;
        }
        input:focus, textarea:focus { border-color: var(--primary); }
        textarea { flex-grow: 1; min-height: 200px; resize: none; }
        
        .btn-group { display: flex; gap: 10px; }
        .btn-group button { flex: 1; padding: 12px; border-radius: 10px; font-weight: bold; border: none; cursor: pointer;}
        .save-btn { background-color: var(--primary); color: white; }
        .cancel-btn { background-color: var(--border); color: var(--text-color); }

        /* 3. Ø´Ø§Ø´Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© */
        #read-title { text-align: center; margin-bottom: 15px; color: var(--primary); }
        #read-content {
            font-size: 26px; line-height: 1.8; text-align: justify;
            word-wrap: break-word; padding-bottom: 120px; flex-grow: 1;
        }

        /* Ø´Ø±ÙŠØ· Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Ø¹Ø§Ø¦Ù…) */
        .toolbar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            background-color: var(--card-bg); padding: 8px; border-radius: 30px;
            display: flex; gap: 5px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 1px solid var(--border); flex-wrap: wrap; justify-content: center; width: max-content; max-width: 95%;
        }
        .toolbar button {
            background-color: var(--bg-color); color: var(--text-color); border: 1px solid var(--border);
            padding: 8px 12px; border-radius: 20px; font-size: 16px; font-weight: bold; cursor: pointer; min-width: 40px;
        }

        /* ØªÙƒÙŠÙŠÙ Ù„Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© */
        @media (max-width: 350px) {
            .container { padding: 10px; }
            h1 { font-size: 20px; margin-bottom: 10px; }
            .add-btn { padding: 12px; font-size: 16px; }
            .list-item { padding: 10px; }
            .list-item h3 { font-size: 16px; }
            .toolbar { bottom: 5px; padding: 5px; border-radius: 15px; width: 98%; }
            .toolbar button { padding: 6px 8px; font-size: 14px; min-width: 35px; }
            #read-content { padding-bottom: 100px; font-size: 22px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© ÙˆØ§Ù„Ù†ØµÙˆØµ</h1>

        <!-- Ø´Ø§Ø´Ø© 1: Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© Ø§Ù„Ù…Ø®Ø²Ù†Ø©) -->
        <div id="home-view" class="view active">
            <button class="add-btn" onclick="showView('add-view')">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ø§Ø¡ / Ù†Øµ Ø¬Ø¯ÙŠØ¯</button>
            <div id="texts-list" class="list-container">
                <!-- Ø³ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù‡Ù†Ø§ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ -->
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© 2: Ø¥Ø¶Ø§ÙØ© Ù†Øµ Ø¬Ø¯ÙŠØ¯ -->
        <div id="add-view" class="view">
            <input type="text" id="new-title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Øµ (Ù…Ø«Ø§Ù„: Ø¯Ø¹Ø§Ø¡ Ø§Ù„ØµØ¨Ø§Ø­)...">
            <textarea id="new-content" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ø£Ùˆ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù‡Ù†Ø§..."></textarea>
            <div class="btn-group">
                <button class="save-btn" onclick="saveText()">ğŸ’¾ Ø­ÙØ¸</button>
                <button class="cancel-btn" onclick="showView('home-view')">âŒ Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>

        <!-- Ø´Ø§Ø´Ø© 3: Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
        <div id="read-view" class="view">
            <h2 id="read-title"></h2>
            <div id="read-content"></div>
            
            <div class="toolbar">
                <button onclick="changeFontSize(4)">A+</button>
                <button onclick="changeFontSize(-4)">A-</button>
                <button onclick="setTheme('dark')">ğŸŒ™</button>
                <button onclick="setTheme('light')">â˜€ï¸</button>
                <button onclick="setTheme('sepia')">ğŸ“œ</button>
                <button onclick="showView('home-view')" style="background-color: var(--danger); color: white; border: none;">Ø±Ø¬ÙˆØ¹</button>
            </div>
        </div>

    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let savedTexts = [];
        let currentFontSize = 26;

        // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŒ Ø¬Ù„Ø¨ Ø§Ù„Ù†ØµÙˆØµ Ù…Ù† Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØµÙØ­
        window.onload = function() {
            const storedData = localStorage.getItem('myDuaLibrary');
            if (storedData) {
                savedTexts = JSON.parse(storedData);
            }
            renderList();
        };

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function showView(viewId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            window.scrollTo(0,0);
        }

        // Ø¯Ø§Ù„Ø© Ø±Ø³Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†ØµÙˆØµ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        function renderList() {
            const listContainer = document.getElementById('texts-list');
            listContainer.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

            if (savedTexts.length === 0) {
                listContainer.innerHTML = '<p style="text-align:center; color:gray; margin-top:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØµÙˆØµ Ù…Ø­ÙÙˆØ¸Ø©. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¥Ø¶Ø§ÙØ© Ù†Øµ Ø¬Ø¯ÙŠØ¯.</p>';
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            savedTexts.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.onclick = (e) => {
                    // Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¶ØºØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø­Ø°ÙØŒ Ø§ÙØªØ­ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                    if(!e.target.classList.contains('delete-btn')) {
                        openText(index);
                    }
                };

                div.innerHTML = `
                    <h3>${item.title || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}</h3>
                    <button class="delete-btn" onclick="deleteText(${index})">Ø­Ø°Ù</button>
                `;
                listContainer.appendChild(div);
            });
        }

        // Ø¯Ø§Ù„Ø© Ø­ÙØ¸ Ù†Øµ Ø¬Ø¯ÙŠØ¯
        function saveText() {
            const titleInput = document.getElementById('new-title');
            const contentInput = document.getElementById('new-content');
            
            const title = titleInput.value.trim();
            const content = contentInput.value.trim();

            if (!content) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ!");
                return;
            }

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Øµ Ù„Ù„Ù…ØµÙÙˆÙØ©
            savedTexts.push({
                title: title || 'Ø¯Ø¹Ø§Ø¡ / Ù†Øµ',
                content: content
            });

            // Ø­ÙØ¸ Ø§Ù„Ù…ØµÙÙˆÙØ© ÙÙŠ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØµÙØ­
            localStorage.setItem('myDuaLibrary', JSON.stringify(savedTexts));

            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            titleInput.value = '';
            contentInput.value = '';
            renderList();
            showView('home-view');
        }

        // Ø¯Ø§Ù„Ø© Ø­Ø°Ù Ù†Øµ
        function deleteText(index) {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù†ØµØŸ")) {
                savedTexts.splice(index, 1);
                localStorage.setItem('myDuaLibrary', JSON.stringify(savedTexts));
                renderList();
            }
        }

        // Ø¯Ø§Ù„Ø© ÙØªØ­ Ø§Ù„Ù†Øµ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
        function openText(index) {
            const item = savedTexts[index];
            document.getElementById('read-title').innerText = item.title;
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ù„Ø£Ø³Ø·Ø± Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ø±ÙŠØ­Ø©
            document.getElementById('read-content').innerHTML = item.content.replace(/\n/g, '<br>');
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ù†Øµ Ø¬Ø¯ÙŠØ¯
            currentFontSize = 26;
            document.getElementById('read-content').style.fontSize = currentFontSize + 'px';
            
            showView('read-view');
        }

        // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Ø§Ù„ØªÙƒØ¨ÙŠØ±ØŒ Ø§Ù„ØªØµØºÙŠØ±ØŒ Ø§Ù„Ø£Ù„ÙˆØ§Ù†)
        function changeFontSize(step) {
            currentFontSize += step;
            if (currentFontSize < 14) currentFontSize = 14; 
            if (currentFontSize > 80) currentSize = 80;
            document.getElementById('read-content').style.fontSize = currentFontSize + 'px';
        }

        function setTheme(theme) {
            document.body.className = ''; 
            if (theme !== 'light') {
                document.body.classList.add(theme + '-mode');
            }
        }
    </script>
</body>
</html>
