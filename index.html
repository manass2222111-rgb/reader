<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø³ÙŠØ·</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #2d3748;
            --control-bg: #f7fafc;
            --btn-bg: #edf2f7;
            --btn-hover: #e2e8f0;
            --primary: #3182ce;
        }

        body.dark-mode {
            --bg-color: #1a202c;
            --text-color: #e2e8f0;
            --control-bg: #2d3748;
            --btn-bg: #4a5568;
            --btn-hover: #718096;
            --primary: #63b3ed;
        }

        body.sepia-mode {
            --bg-color: #fbf0d9;
            --text-color: #5f4b32;
            --control-bg: #f4e4c4;
            --btn-bg: #eaddc0;
            --btn-hover: #dfceab;
            --primary: #8c6d46;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; transition: background-color 0.3s, color 0.3s; }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            flex-grow: 1;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        #input-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
            flex-grow: 1;
            width: 100%;
        }

        textarea {
            width: 100%;
            flex-grow: 1;
            min-height: 300px;
            padding: 15px;
            border: 2px dashed var(--primary);
            border-radius: 12px;
            background-color: var(--control-bg);
            color: var(--text-color);
            font-family: inherit;
            font-size: 18px;
            resize: none;
            outline: none;
        }

        button {
            background-color: var(--btn-bg);
            color: var(--text-color);
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            font-family: inherit;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        button.primary-btn {
            background-color: var(--primary);
            color: white;
            width: 100%;
            font-size: 20px;
            padding: 15px;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© */
        #reader-section {
            display: none;
            flex-direction: column;
            flex-grow: 1;
            width: 100%;
        }

        #text-display {
            font-size: 24px;
            line-height: 1.8;
            text-align: justify;
            word-wrap: break-word;
            padding-bottom: 100px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø£Ø³ÙÙ„ */
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© */
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px;
            background-color: var(--control-bg);
            border-radius: 30px;
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 100;
            width: max-content;
            max-width: 95%;
        }
        .controls button { padding: 10px 15px; min-width: 45px; font-size: 18px; }

        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 350px) {
            .container { padding: 10px; }
            .controls { bottom: 5px; border-radius: 15px; width: 98%; padding: 5px;}
            .controls button { padding: 8px 10px; font-size: 16px; min-width: 40px;}
            #text-display { padding-bottom: 80px; }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <!-- ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ -->
        <div id="input-section">
            <h2 style="text-align: center; color: var(--primary);">Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø³ÙŠØ·</h2>
            <textarea id="text-input" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§..."></textarea>
            <button class="primary-btn" onclick="startReading()">ğŸ“– Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>
            <button onclick="clearText()" style="background: #f56565; color: white;">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†Øµ</button>
        </div>

        <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
        <div id="reader-section">
            <div id="text-display"></div>
            
            <div class="controls">
                <button onclick="changeSize(4)">A+</button>
                <button onclick="changeSize(-4)">A-</button>
                <button onclick="setTheme('dark')">ğŸŒ™</button>
                <button onclick="setTheme('light')">â˜€ï¸</button>
                <button onclick="setTheme('sepia')">ğŸ“œ</button>
                <button onclick="editMode()" style="background: #e2e8f0; color: black;">Ø±Ø¬ÙˆØ¹</button>
            </div>
        </div>

    </div>

    <script>
        const textInput = document.getElementById('text-input');
        const textDisplay = document.getElementById('text-display');
        const inputSection = document.getElementById('input-section');
        const readerSection = document.getElementById('reader-section');
        
        let currentFontSize = 24;

        // Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©ØŒ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ø³Ø§Ø¨Ù‚Ø§Ù‹ (Ø¥Ù† ÙˆØ¬Ø¯)
        window.onload = function() {
            const savedText = localStorage.getItem('savedReaderText');
            if (savedText) {
                textInput.value = savedText;
            }
        };

        function startReading() {
            const text = textInput.value.trim();
            if(!text) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù„ØµÙ‚ Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹!");
                return;
            }

            // Ø­ÙØ¸ Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù„ÙƒÙŠ Ù„Ø§ ÙŠØ¶ÙŠØ¹
            localStorage.setItem('savedReaderText', text);

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø·Ø±
            textDisplay.innerHTML = text.replace(/\n/g, '<br><br>');
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
            inputSection.style.display = 'none';
            readerSection.style.display = 'flex';
            
            // ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
            window.scrollTo(0, 0);
        }

        function editMode() {
            inputSection.style.display = 'flex';
            readerSection.style.display = 'none';
        }

        function clearText() {
            if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ù†ØµØŸ")) {
                textInput.value = '';
                localStorage.removeItem('savedReaderText');
            }
        }

        function changeSize(step) {
            currentFontSize += step;
            if(currentFontSize < 14) currentFontSize = 14;
            if(currentFontSize > 80) currentFontSize = 80;
            textDisplay.style.fontSize = currentFontSize + 'px';
        }

        function setTheme(theme) {
            document.body.className = ''; 
            if (theme !== 'light') {
                document.body.classList.add(theme + '-mode');
            }
        }
    </script>
</body>
</html>
